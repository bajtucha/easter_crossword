<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wielkanocna ≈Çamig≈Ç√≥wka</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Rubik', sans-serif;
      padding: 40px;
      background: linear-gradient(to right, #f9f9f9, #e0e0e0);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
    }
    h1 {
      font-size: 32px;
      margin-bottom: 30px;
      color: #333;
    }
    .poetic {
  font-family: 'Dancing Script', cursive;
  font-size: 50px;
  line-height: 1.4;
  color: #444;
}
    #score-container {
  display: flex;
  gap: 0px;
  margin-bottom: 20px;
  justify-content: flex-start;
  width: 100%;
  max-width: 900px;
  align-self: center;
  font-size: 0; 
}

    #score-container img {
      width: 152px;
      height: auto;
      margin: 0;
      padding: 0;
      display: block; /* ‚Üê zapobiega domy≈õlnym odstƒôpom inline-img */
    }
    #game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-width: 900px;
      min-height: 300px;
      width: 100%;
    }
    #mascot-container {
      position: relative;
      display: flex;
      align-items: flex-start;
      margin-bottom: 20px;
      width: 100%;
      flex-wrap: wrap;
    }
    #mascot-container img {
      width: 180px;
      height: auto;
      flex-shrink: 0;
    }
    #speech-bubble {
      position: relative;
      background: white;
      border: 2px solid #ccc;
      border-radius: 12px;
      padding: 16px 24px;
      margin-left: 20px;
      min-height: 80px;
      max-width: 300px;
      display: inline-block;
      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
      font-size: 18px;
      white-space: normal;
      width: auto;
    }
    #speech-bubble::after {
      content: '';
      position: absolute;
      top: 20px;
      left: -20px;
      border: 10px solid transparent;
      border-right-color: white;
    }
    #speech-bubble::before {
      content: '';
      position: absolute;
      top: 19px;
      left: -22px;
      border: 11px solid transparent;
      border-right-color: #ccc;
    }
    #next-button {
      margin-top: 10px;
      background-color: #008CBA;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: none;
    }
    #next-button:hover {
      background-color: #0077a6;
    }
    #input-container {
      display: none;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .letter-input {
      width: 50px;
      height: 50px;
      text-align: center;
      font-size: 28px;
      text-transform: uppercase;
      margin: 4px;
      border-radius: 8px;
      border: 2px solid #aaa;
    }
    button {
      margin-top: 20px;
      padding: 12px 24px;
      font-size: 18px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: none;
    }
    .disabled-input {
  opacity: 0.5;
  pointer-events: none;
}
.egg-earned {
  animation: popIn 0.3s ease-out;
}

@keyframes popIn {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}
#next-button:disabled {
  background-color: #aaa;
  cursor: not-allowed;
}
  </style>
</head>
<body>
    <h1>Wielkanocna ≈Çamig≈Ç√≥wka</h1>
    <div id="score-container"></div>
    <div id="game-container" style="max-width: 900px; width: 100%;">
        
        <div id="mascot-container">
          <img id="mascot-img" src="kamala_angry.png" alt="Ma≈Çpa">
          <div id="speech-bubble"></div>
        </div>
    <button id="next-button" onclick="handleNextButton()">Dalej</button>
    <div id="input-container"></div>
    <div id="message"></div>
    <button id="check-button" onclick="submitAnswer()">Sprawd≈∫</button>
  </div>



  <script>
    let score = 0;
    let collectedEggs = []; // ü•ö ‚Üê tu bƒôdziemy trzymaƒá nazwy zdobytych jajek
    let currentStep = 0;
    let isAnswering = false;
    let isLocked = false;
    let dialogIndex = 0;

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    const rounds = [
      {
        mascot: 'kamala_disgusted.png',
        dialog: [
          { text: "No dobra. Po pierwsze, wcale nie chcia≈Çam tu byƒá!" },
          { text: "Po drugie, to wyjƒÖtkowo durna zabawa." },
          { text: "Po trzecie, nie wiem czemu akurat to mnie przypad≈Ço wyja≈õniƒá ci zasady?", img: "kamala_angry.png" },
          { text: "No, ale dobra, niech bƒôdzie. Skup siƒô, bo nie bƒôdƒô powtarzaƒá." },
          { text: "Ja i kolejni prezenterzy - ju≈º nie tak fajni jak ja - bƒôdziemy ci zadawaƒá pytania." },
          { text: "Jak odpowiesz na wszystkie - dostajesz jajko." },
          { text: "Nie wiem czemu nie banana, nie ja wymy≈õla≈Çam tƒÖ durnƒÖ grƒô.", img: "kamala_mad.png" },
          { text: "Dobra, zaczynamy!" }
          
        ],
        question: {
          text: "Jakie owoce warto sadziƒá w mie≈õcie?",
          answer: "BANANY",
          imageCorrect: "kamala_disgusted.png",
          imageWrong: "kamala_facepalm.png",
          imageAsk: "kamala_disgusted.png",
          scorePoint: false,
          correctReaction: { text: "No, to chyba oczywiste!", img: "kamala_disgusted.png" },
          wrongReaction: { text: "Jeste≈õ kretynem!", img: "kamala_facepalm.png" }
        }
      },
      {
        mascot: 'kamala_disgusted.png',
        dialog: [
          { text: "Idziemy dalej." },
          { text: "Jak odpowiesz na wszystkie moje pytania, powiem ci gdzie szukaƒá pierwszego jajka." },
          { text: "No i wreszcie bƒôdƒô mog≈Ça sobie p√≥j≈õƒá, a pa≈Çeczkƒô przejmie kto inny." },
          { text: "Zebrane jajka za≈õwiecƒÖ ci siƒô w punktacji." },
          { text: "Jak to gdzie?! Tu nade mnƒÖ pacanie! Widzisz tu jakie≈õ inne jajka?", img: "kamala_mad.png" },
          { text: "Ka≈ºde przedstawia jaki≈õ ≈ºywio≈Ç. Ze mnƒÖ walczysz o wiatr.", img: "kamala_normal.png"},
          { text: "WciƒÖ≈º nie mogƒô zrozumieƒá, czemu to nie sƒÖ banany.", img: "kamala_facepalm.png" }
          
        ],
        question: {
          text: "Co powinna przede wszystkim zawieraƒá sa≈Çatka Kamali?",
          answer: "BANANY",
          imageCorrect: "kamala_disgusted.png",
          imageWrong: "kamala_facepalm.png",
          imageAsk: "kamala_disgusted.png",
          scorePoint: false,
          correctReaction: { text: "Prawda? Banan poprawia smak wszystkiego!", img: "kamala_suprised.png" },
          wrongReaction: { text: "Czy ciebie bili po g≈Çowie jak by≈Çe≈õ ma≈Çy?", img: "kamala_facepalm.png" }
        }
     },{        
        mascot: 'kamala_disgusted.png',
        dialog: [
          { text: "Kolejne, trudne pytanie." },
          { text: "Ale, zanim przejdziemy dalej..." },
          { text: "Sporo mnie kosztuje to t≈Çumaczenie. Odwdziƒôczy≈Çby≈õ siƒô jako≈õ, hmm?" },
          { text: "Masz mo≈ºe banana?", img: "kamala_excited.png" },
          { text: "...", img: "kamala_excited.png" },
          { text: "...", img: "kamala_excited.png" },
          { text: "...", img: "kamala_excited.png" },
          { text: "Tak my≈õla≈Çam.", img: "kamala_angry.png" }
        ],
        question: {
          text: "Kto by≈Çby najlepszym Marsza≈Çkiem Sejmu?",
          answer: "KAMALA",
          imageCorrect: "kamala_disgusted.png",
          imageWrong: "kamala_facepalm.png",
          imageAsk: "kamala_disgusted.png",
          scorePoint: true,
          eggImage: "egg_air.png",
          correctReaction: { text: "Fajny go≈õƒá z ciebie!", img: "kamala_normal.png" },
          wrongReaction: { text: "≈ºe co !?", img: "kamala_mad.png" }
        }
      }
    ,{        
        mascot: 'biden_joyful.png',
        dialog: [
          { text: "Ale serio tak my≈õlisz?", img: "kamala_moved.png" },
          { text: "No dobra. Jajko siƒô za≈õwieci≈Ço, czyli czas na poszukiwania.", img: "kamala_disgusted.png" },
          { text: "ZajƒÖc ma gadkƒô\nZajƒÖc ma bajer\nlecz nie je banan√≥w\nZajƒÖc to - frajer.", img: "kamala_disgusted.png", poetic: true },
          { text: "Znalaz≈Çe≈õ? Uda≈Ço siƒô?!", img: "kamala_suprised.png" },
          { text: "Mam nadziejƒô, ≈ºe to banan!", img: "kamala_excited.png" },
          { text: "Dobra, spadam, bo ≈ºywe trupy nadchodzƒÖ.", img: "kamala_disgusted.png" },
          { text: "Witajcie ch≈Çopcy, dziewczyny oraz wszyscy pomiƒôdzy i poza nimi." },
          { text: "To ja, Joe!" },
          { text: "Jak tam? Trzymasz siƒô za gadki?" },
          { text: "A nie, czekaj... ty rozwiƒÖzujesz zagadki!", img: "biden_suprised.png" },
          { text: "≈Åapiesz, nie? Hahaha!", img: "biden_laugh.png" },
          { text: "No dobra, kupa ≈õmiechu. Ale jestem tu, bo mam ci zadaƒá jakie≈õ pytania." },
          { text: "Zacznijmy od takiego:" },
        ],
        question: {
          text: "Jak siƒô nazywa miasto, do kt√≥rego nie zdƒÖ≈ºy≈Çem na debatƒô?",
          answer: "KO≈ÉSKIE",
          imageCorrect: "biden_joyful.png",
          imageWrong: "biden_suprised.png",
          imageAsk: "biden_joyful.png",
          scorePoint: false,
          correctReaction: { text: "Tak jest. Piƒôkne miasto, Jad≈Çem tam pizzƒô z moimi marines.", img: "biden_joyful.png" },
          wrongReaction: { text: "Tu raczej nie by≈Çem. Albo by≈Çem, ale nie pamiƒôtam. To ca≈Çkiem mo≈ºliwe.", img: "biden_confused.png" }
        }
      }
      ,{        
        mascot: 'biden_joyful.png',
        dialog: [
          { text: "a mo≈ºe to by≈Ço gdzie indziej", img: "biden_confused.png" },
          { text: "Niewa≈ºne. To teraz powiedz mi:" }
        ],
        question: {
          text: "Jak siƒô nazywa kandydat, kt√≥ry czasem je≈∫dzi samochodem, a czasem na wrotkach?",
          answer: "NAWROCKI",
          imageCorrect: "biden_sleep.png",
          imageWrong: "biden_confused.png",
          imageAsk: "biden_joyful.png",
          scorePoint: false,
          correctReaction: { text: "zzz...", img: "biden_sleep.png"},
          wrongReaction: { text: "A, o co ja ciƒô w≈Ça≈õciwie pyta≈Çem?", img: "biden_confused.png" }
        }
      }
      ,{        
        mascot: 'biden_joyful.png',
        dialog: [
          { text: "Aaa! Tak? Co?", img: "biden_suprised.png" },
          { text: "Ameryka zawsze bƒôdzie staƒá po stronie demokracji!", img: "biden_talk.png" },
          { text: "zaraz... nie, wr√≥ƒá", img: "biden_confused.png"},
          { text: "Dobrze. ≈öwietnie sobie radzisz ch≈Çopcze."},
          { text: "Dam ci potem w nagrodƒô takƒÖ fajnƒÖ czerwonƒÖ czapkƒô, chcesz?"},
          { text: "SkƒÖd ja jƒÖ mam?", img: "biden_confused.png" },
          { text: "No dobrze. Czas na kolejne pytanie." }
        ],
        question: {
          text: "Jakim systemem jest ETS w istocie swojej?",
          answer: "PODATKOWYM",
          imageAsk: "biden_joyful.png",
          scorePoint: false,
          correctReaction: { text: "zzz... z kawa≈Çkami czekolady, poproszƒô... zzz", img: "biden_sleepdeep.png"},
          wrongReaction: { text: "Nie ≈Çam siƒô! To tw√≥j czas by ≈õwieciƒá.", img: "biden_joyful.png" }
        }
      }
      ,{        
        mascot: 'biden_joyful.png',
        dialog: [
          { text: "Jestem, jestem! Dobra robota." },
          { text: "No to jeszcze jedno ode mnie." }   
        ],
        question: {
          text: "Niekt√≥rzy twierdzƒÖ, ≈ºe podatki powinny byƒá...",
          answer: "NISKIEIPROSTE",
          imageCorrect: "biden_sleep.png",
          imageWrong: "biden_confused.png",
          imageAsk: "biden_joyful.png",
          scorePoint: true,
          eggImage: "egg_politics.png",
          correctReaction: { text: "Kablamo!", img: "biden_yes.png"},
          wrongReaction: { text: "Oh, fiddle stick!", img: "biden_suprised.png" }
        }
      }
      ,{        
        mascot: 'cookie_angry.png',
        dialog: [
          { text: "Prawdziwy z ciebie egg hunter.", img: "biden_yes.png" },
          { text: "Hmm... przypomnia≈Ço mi siƒô: muszƒô zadzwoniƒá do syna.", img: "biden_confused.png" },
          { text: "No, nic to. Jak widzisz ch≈Çopcze, m√≥j ≈ºywio≈Ç to polityka!", img: "biden_joyful.png" },
          { text: "Czas wiƒôc na polityczne jaja! Hahahaha!", img: "biden_laugh.png"},
          { text: "Na prawo - Prawica\nna lewo - Lewica\na jajko trzyma\nM≈Çoda Lwica.", poetic: true, img: "biden_joyful.png" },
          { text: "Znalaz≈Çe≈õ? Powodzenia i pamiƒôtaj: No eggs left behind!", img: "biden_joyful.png"  }, 
          { text: "Dobra. Sko≈Ñczy≈Ço siƒô babci sranie."  }, 
          { text: "Teraz bƒôdziesz odpowiada≈Ç mi -"  },
          { text: "Pierniczkowi."  },
          { text: "Co≈õ ciƒô bawi?", img: "cookie_veryangry.png"  },
          { text: "Tu nie ma nic ≈õmiesznego. Zaczniemy od polityki klimatycznej."  }
        ],
        question: {
          text: "Przypomnij moje s≈Çynne has≈Ço walki z OZE",
          answer: "COMAPIERNIKDOWIATRAKA",
          imageCorrect: "biden_sleep.png",
          imageWrong: "biden_confused.png",
          imageAsk: "cookie_angry.png",
          scorePoint: false,
          correctReaction: { text: "Tak jest! To by≈Ço najlepsze has≈Ço w historii wybor√≥w.", img: "cookie_proud.png"},
          wrongReaction: { text: "Przyznaj siƒô. Jeste≈õ jednym z tych klimatyst√≥w!", img: "cookie_veryangry.png" }
        }
      }
      ,{        
        mascot: 'cookie_angry.png',
        dialog: [
          { text: "Ale sp√≥jrzmy w przysz≈Ço≈õƒá." },
          { text: "Wszak walka z klimatem trwa." },
          { text: "Mam nowe has≈Ço."},
          { text: "Bardzo chwytliwe.", img: "cookie_stering.png"},
          { text: "Jak zawsze!", img: "cookie_proud.png"},
          { text: "Doko≈Ñcz je. ≈Åatwo wpada w ucho."  }
        ],
        question: {
          text: "Wichurami, po≈ºarami i suszami straszƒÖ ciƒô? Piernik, te≈º co≈õ dla nich ma: cyklon",
          answer: "B",
          imageCorrect: "biden_sleep.png",
          imageWrong: "biden_confused.png",
          imageAsk: "cookie_angry.png",
          scorePoint: false,
          correctReaction: { text: "Kr√≥tko ze ≈õwirami!", img: "cookie_happy.png"},
          wrongReaction: { text: "Mia≈Çe≈õ zgadnƒÖƒá jednƒÖ literƒô! JednƒÖ! Owszem tworzƒô armiƒô tƒôpych s≈Çug, ale nie a≈º tak tƒôpych.", img: "cookie_veryangry.png" }
        }
      }
      ,{        
        mascot: 'cookie_angry.png',
        dialog: [
          { text: "Wiesz, mam takiego jednego idola.", img: "cookie_thinking.png" },
          { text: "Czyta≈Çem o nim sporo.", img: "cookie_thinking.png" },
          { text: "Nazywa siƒô Zbazylew.", img: "cookie_thinking.png"},
          { text: "Hayetan Zbazylew. Mocny go≈õƒá.", img: "cookie_strong.png"},
          { text: "Nie cacka≈Ç siƒô z wrogami.", img: "cookie_proud.png"},
          { text: "Odporny na krytykƒô, ale nie dajƒÖcy sobie w kaszƒô dmuchaƒá.", img: "cookie_proud.png"},
          { text: "Tak samo jak ja.", img: "cookie_stering.png"},
          { text: "Powiniene≈õ znaƒá jego dzieje. Dlatego pytanie bƒôdzie takie:"  }
        ],
        question: {
          text: "Wed≈Çug s≈Çynnego cytatu Wielkiego Zbazylewa, na kt√≥rym opiera siƒô ca≈Çe pa≈Ñstwo, kto nie ma prawa g≈Çosu?",
          answer: "ZDRAJCY",
          imageAsk: "cookie_angry.png",
          scorePoint: false,
          correctReaction: { text: "W≈Ça≈õnie! Czyli wszyscy. kt√≥rzy odebrali mi w≈Çadzƒô", img: "cookie_crying.png"},
          wrongReaction: { text: "No co siƒô gapisz? Widaƒá musisz zapoznaƒá siƒô z dziejami Hayetana. Do roboty!", img: "cookie_veryangry.png" }
        }
      }
      ,{        
        mascot: 'cookie_crying.png',
        dialog: [
          { text: "I teraz jestem tu i gram w jakie≈õ durne krzyz√≥wki." },
          { text: "Zrobi≈Çe≈õ mi przykro≈õƒá!" },
          { text: "Ja chcƒô znowu rzƒÖdziƒá!", img: "cookie_cryingmore.png"},
          { text: "Wszystkich do wora!", img: "cookie_cryingmore.png"}
        ],
        question: {
          text: "W√≥r do...",
          answer: "JEZIORA",
          imageAsk: "cookie_cryingmore.png",
          eggImage: "egg_water.png",
          scorePoint: true,
          correctReaction: { text: "No dobra! Ju≈º mi lepiej.", img: "cookie_crying.png"},
          wrongReaction: { text: "Nic nie rozumiesz! Nikt mnie nie rozumie!", img: "cookie_cryingmore.png" }
        }
      }
      ,{        
        mascot: 'cookie_angry.png',
        dialog: [
          { text: "Jajko siƒô pojawi≈Ço. Ciekawe, czemu ≈ºywio≈Ç wody...", img: "cookie_thinking.png"},
          { text: "No nic. Ko≈Ñczƒô zatem i wysy≈Çam ciƒô na poszukiwania."},
          { text: "Karo, kiery,\ntrefle, piki.\nZajƒÖc lubi\nczyste rƒôczniki.", poetic: true },
          { text: "Jedyna z tego zaleta, ze przynajmniej ka≈ºƒÖ ci szukaƒá jajek, a nie piernik√≥w.", img: "cookie_stering.png"},
          { text: "Wiesz... polubi≈Çem ciƒô nawet.", img: "cookie_happy.png"},
          { text: "WyglƒÖdasz na aryjczyka.", img: "cookie_proud.png"},
          { text: "Mniam!", img: "alf_eating.png"},
          { text: "Dziwne... jak on siƒô uchowa≈Ç tak d≈Çugo po ≈õwiƒôtach?", img: "alf_confused.png"},
          { text: "Chyba siƒô starzejƒô", img: "alf_disgusted.png"},
          { text: "Ale ja nie po to tu jestem ≈ºeby siƒô ≈ºaliƒá. Przyszed≈Çem zadaƒá ci parƒô pyta≈Ñ.", img: "alf_happy.png"},
          { text: "Na m√≥j ulubiony temat.", img: "alf_happy.png"},
          { text: "Jedzenie!", img: "alf_happy.png"}
          
        ],
        question: {
          text: "Czym najlepiej prze≈Ço≈ºyƒá bagietkƒô?",
          answer: "KOTEM",
          imageAsk: "alf_happy.png",
          scorePoint: false,
          correctReaction: { text: "Wreszcie kto≈õ z wysublimowanym gustem!", img: "alf_happy.png"},
          wrongReaction: { text: "Wszystko nadaje siƒô do bagietki, ale wierz mi, sƒÖ lepsze opcje.", img: "alf_ok.png" }
        }
      }
      ,{        
        mascot: 'alf_happy.png',
        dialog: [
          { text: "Alf ?!", img: "willie_angry.png"},
          { text: "Tak, wiem! Zasady, zasady. Wasze ziemskie zasady.", img: "alf_angry.png" },
          { text: "Nie wszystkim one pasujƒÖ. Rozmawia≈Çem z Ufoksenem i on ma na to sw√≥j poglƒÖd.", img: "alf_angry.png"},
          { text: "Na marginesie... tak siƒô sk≈Çada, ≈ºe bli≈ºszy mojemu.", img: "alf_ok.png"},
          { text: "Wiƒôc nadejdzie taki dzie≈Ñ, ≈ºe przestaniemy byƒá w opozycji, Williamie.", img: "alf_happy.png"},
          { text: "Zaraz, Willie ?! Co tu robi Willie?", img: "alf_confused.png"},
          {text: "Zostawmy to. Wybacz te drobne rodzinne sprzeczki."},
          {text: "Czas na kolejne pytanie."},
          {text: "Wiesz, ≈ºe nie jestem jedynym g≈Çodomorem na tej planecie, prawda?", img: "alf_disgusted.png"},
          {text: "Czyta≈Çe≈õ mo≈ºe Kroniki Miasta Hajduszo?", img:"alf_ok.png" },
          {text: "Je≈õli tak, to..."}
        ],
        question: {
          text: "Wiesz kto tam kr√≥lowa≈Ç apetytem?",
          answer: "ZSUZSANNA",
          imageAsk: "alf_happy.png",
          scorePoint: false,
          correctReaction: { text: "Tak. To moja ulubiona postaƒá.", img: "alf_happy.png"},
          wrongReaction: { text: "Pamiƒôtam kogo≈õ, kto bardziej skaka≈Ç na widok jedzenia!", img: "alf_ok.png" }
        }
      }
      ,{        
        mascot: 'alf_happy.png',
        dialog: [
          { text: "Mi≈Ço siƒô czyta o takich ludziach."},
          { text: "Kt√≥rzy wiedzƒÖ co dobre.", img: "alf_ok.png" },
          { text: "Ale wszystko co dobre, musi gdzie≈õ trafiaƒá, prawda?" },
          { text: "Ja mam to szczƒô≈õcie, bo natura obda≈ºy≈Ça mnie..."}
        ],
        question: {
          text: "No w≈Ça≈õnie, iloma ≈ºo≈ÇƒÖdkami?",
          answer: "7",
          imageAsk: "alf_confused.png",
          scorePoint: true,
          eggImage: "egg_earth.png",
          correctReaction: { text: "Tak. Piƒôkna liczba, czy≈º nie?", img: "alf_happy.png"},
          wrongReaction: { text: "Chyba mylisz mnie z innym kosmitƒÖ.", img: "alf_angry.png" }
        }
      }
      ,{        
        mascot: 'hippo_nice.png',
        dialog: [
          { text: "Rozumiesz, ≈ºe z tƒÖ liczbƒÖ ≈º√≥≈ÇƒÖdk√≥w, raczej twardo stƒÖpam po ziemi.", img: "alf_happy.png"},
          { text: "Zatem czas, aby i ciebie porwa≈Ç ≈ºywio≈Ç ziemi", img: "alf_ok.png"},
          { text: "Jajko ziemi,\njajko st≈Çuczone,\nskorupka krucha\nkolejnƒÖ postaƒá kryje\nrze≈º... ", poetic: true, img: "alf_happy.png"},
          { text: "I co? Znalaz≈Çe≈õ?", img: "alf_happy.png"},
          { text: "Nie wyglƒÖda mi to na co≈õ do jedzenia.", img: "alf_disgusted.png"},
          { text: "Ale, zawsze mo≈ºna spr√≥bowaƒá. Zacznij od polizania.", img: "alf_ok.png"},
          { text: "O nie! Kto≈õ puka.", img: "alf_angry.png"},
          { text: "Dobra, znikam zatem. Zobaczƒô co Kate szykuje na ≈õwiƒôta", img: "alf_happy.png"},
          { text: "Cze≈õƒá!!! Jak to mi≈Ço ciƒô widzieƒá."},
          { text: "Nie przeszkadzam?"},
          { text: "O jej! Jak piƒôknie sobie radzisz z jajeczkami.", img: "hippo_suprised.png"},
          { text: "Ju≈º tylko jednego ci brakuje.", img: "hippo_suprised.png"},
          { text: "Gratulacje! Dawaj przytulaska.", img: "hippo_hug.png"},
          { text: "Pomogƒô ci z ostatnim. Na pewno sobie poradzimy."},
          { text: "Nie martw siƒô", img: "hippo_hug.png"}

         
        ],
        question: {
          text: "Powiedz mi najpierw: co jest w ≈ºyciu najwa≈ºniejsze?",
          answer: "MI≈ÅO≈öƒÜ",
          imageAsk: "hippo_dreamy.png",
          scorePoint: false,
          correctReaction: { text: "No pewnie! C√≥≈ºby innego?!", img: "hippo_excited.png"},
          wrongReaction: { text: "Tak uwa≈ºasz? No nie wiem.", img: "hippo_suprised.png" }
        }
      }
      ,{        
        mascot: 'hippo_nice.png',
        dialog: [
          { text: "Mam nadziejƒô, ≈ºe siƒô nie stresujesz."},
          { text: "Tak, troszkƒô?", img: "hippo_sad.png"},
          { text: "Ojejku. To mo≈ºe dam ci ma≈ÇƒÖ nagrodƒô.", img: "hippo_sad.png"},
          { text: "Nie! Jeszcze za wcze≈õnie na jajeczko."},
          { text: "Buziaczka!!!", img: "hippo_kiss.png"},
          { text: "Chryste!", img: "kamala_facepalm.png"},
          { text: "Nie mƒôcz go zbocze≈Ñcu tylko daj mu jajko!", img: "cookie_angry.png"},
          { text: "Pan pierniczek jak zwykle siƒô denerwuje.", img: "hippo_sad.png" },
          { text: "Niepotrzebnie. Czasem trzeba pocieszyƒá cz≈Çowieka w potrzebie.", img:"hippo_dreamy.png"},
          { text: "Skoro ju≈º rozgrzewkƒô mamy za sobƒÖ, to mo≈ºe teraz takie pytanie:"}

         
        ],
        question: {
          text: "Jakiego koloru marshmallowy najfajniej siƒô sma≈ºy na ognisku?",
          answer: "R√ì≈ªOWE",
          imageAsk: "hippo_nice.png",
          scorePoint: true,
          eggImage: "egg_fire.png",
          correctReaction: { text: "Prawda? Wtedy jest - ogie≈Ñ!", img: "hippo_excited.png"},
          wrongReaction: { text: "Te≈º piƒôkny kolor, ale pomy≈õl jeszcze troszkƒô.", img: "hippo_suprised.png" }
        }
      }
      ,{        
        mascot: 'hippo_nice.png',
        dialog: [
          { text: "A jeszcze jak masz do tego towarzystwo przyjaci√≥≈Ç", img: "hippo_dreamy.png"},
          { text: "Wszyscy ta≈ÑczƒÖ i ≈õpiewajƒÖ", img: "hippo_dreamy.png"},
          { text: "Geje posypujƒÖ patyki brokatem, ≈ºeby mieni≈Çy siƒô w s≈Ço≈Ñcu", img: "hippo_dreamy.png"},
          { text: "Zabijcie mnie.", img: "cookie_facepalm.png"},
          { text: "Debilu! Masz mu opisaƒá ≈ºywio≈Ç ognia, a nie jakie≈õ wygibasy przy ognisku.", img: "cookie_angry.png"},
          { text: "We≈∫ siƒô w gar≈õƒá! Poka≈º jaja!", img: "cookie_stering.png"},
          { text: "Dobrze, dobrze, panie pierniczku!"},
          { text: "Proszƒô siƒô nie denerwowaƒá, ju≈º szukamy jajeczka."},
          { text: "Buziaczka na zgodƒô?", img: "hippo_kiss.png"},
          { text: "...", img: "cookie_veryangry.png"},
          { text: "...", img: "hippo_sad.png" },
          { text: "?", img: "hippo_sad.png" },
          { text: "...", img: "hippo_sad.png" },
          { text: "No dobrze. Czyli ogie≈Ñ?", img:"hippo_suprised.png"},
          { text: "Wiem! Zrobimy to romantycznie.", img: "hippo_excited.png"},
          { text: "Ja jebiƒô! Jak grochem o ≈õcianƒô.", img: "cookie_facepalm.png"},
          { text: "Zgaszonych ≈õwiec\nsmutne istnienie\nby rado≈õƒá odzyskaƒá\npotrzebne p≈Çomienie.", poetic: true, img: "hippo_dreamy.png"},
          { text: "Uda≈Ço siƒô! Zdoby≈Çe≈õ wszystkie jajeczka!", img: "hippo_excited.png"},
          { text: "Wszyscy, ≈ºyczymy ci cudownych, wspania≈Çych i Weso≈Çych ≈öwiƒÖt!", img: "bye.png"}
         
        ]
        
      }
    ];

    function playBeep() {
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'square';
      osc.frequency.setValueAtTime(600, audioCtx.currentTime);
      gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.start();
      osc.stop(audioCtx.currentTime + 0.02);
    }

    function typeText(text, callback, extraClass = '') {
  const bubble = document.getElementById('speech-bubble');
  const nextButton = document.getElementById('next-button');
  bubble.className = extraClass;
  bubble.innerHTML = '';
  let index = 0;

  // Zablokuj przycisk na czas pisania
  nextButton.disabled = true;
  nextButton.style.opacity = 0.5;
  nextButton.style.pointerEvents = 'none';

  const interval = setInterval(() => {
    const char = text.charAt(index);
    if (char === '\n') {
      bubble.innerHTML += '<br>';
    } else {
      bubble.innerHTML += char;
      if (char !== ' ') playBeep();
    }
    index++;
    if (index === text.length) {
      clearInterval(interval);

      // Odblokuj przycisk po zako≈Ñczeniu pisania
      nextButton.disabled = false;
      nextButton.style.opacity = 1;
      nextButton.style.pointerEvents = 'auto';

      if (callback) callback();
    }
  }, 20);
}


const eggSound = new Audio('egg-sound.mp3');
eggSound.preload = 'auto';
function updateScoreDisplay() {
  const container = document.getElementById('score-container');
  container.innerHTML = '';

  for (let i = 0; i < 5; i++) {
    const img = document.createElement('img');
    if (i < collectedEggs.length) {
      img.src = collectedEggs[i];
      img.className = 'egg-earned';
    } else {
      img.src = 'egg_grey.png';
      img.className = 'egg-empty';
    }
    container.appendChild(img);
  }
}

    function renderQuestion() {
      const round = rounds[currentStep];
      const container = document.getElementById('input-container');
      container.style.display = 'flex';
      container.innerHTML = '';
      document.getElementById('mascot-img').src = round.question.imageAsk;
      typeText(round.question.text, () => {
  isLocked = false; // üîì Odblokowujemy dopiero po zako≈Ñczeniu animacji pytania
});
      for (let i = 0; i < round.question.answer.length; i++) {
        const input = document.createElement('input');
        input.setAttribute('maxlength', 1);
        input.className = 'letter-input';
        input.addEventListener('input', e => {
          const next = e.target.nextElementSibling;
          if (next && e.target.value) next.focus();
        });
        container.appendChild(input);
      }
      document.getElementById('next-button').style.display = 'inline-block';
      document.getElementById('next-button').textContent = 'Odpowiedz';
      isAnswering = true;

    }

    function submitAnswer() {
      if (isLocked) return; // ‚õîÔ∏è blokuj, je≈õli czekamy
      const round = rounds[currentStep];
      const inputs = document.querySelectorAll('.letter-input');
      let guess = '';
      inputs.forEach(input => guess += input.value.toUpperCase());

      if (guess === round.question.answer) {
        if (round.question.scorePoint) {
            const previousScore = score;
            score = Math.min(5, score + 1);
            // Dodaj do kolekcji zdobyte jajko
            collectedEggs.push(round.question.eggImage || 'egg_color.png'); // ‚Üê KLUCZOWA LINIA
            if (score > previousScore) {
            eggSound.currentTime = 0;
            eggSound.play();
            }
            updateScoreDisplay();
        }
        typeText(round.question.correctReaction.text);
        document.getElementById('mascot-img').src = round.question.correctReaction.img;
        document.getElementById('input-container').style.display = 'none';
        document.getElementById('next-button').textContent = 'Dalej';
        isAnswering = false;
        dialogIndex = 0;
      } else {
        typeText(round.question.wrongReaction.text);
  document.getElementById('mascot-img').src = round.question.wrongReaction.img;
  document.getElementById('next-button').textContent = 'Odpowiedz';

  // Zablokuj edycjƒô i wyszarz
  inputs.forEach(input => input.classList.add('disabled-input'));

  // ‚õîÔ∏è Zablokuj mo≈ºliwo≈õƒá odpowiedzi na chwilƒô
  isLocked = true;
  document.getElementById('next-button').style.display = 'none'; // ‚Üê ukryj przycisk
  setTimeout(() => {
    // Odblokuj i od≈õwie≈º pytanie
    inputs.forEach(input => input.classList.remove('disabled-input'));
    renderQuestion();
  }, 4000);
      }
    }

    function showNextDialog() {
  const round = rounds[currentStep];
  
  // Je≈õli zako≈Ñczyli≈õmy ostatni dialog i nie ma pytania ‚Äî KONIEC GRY
  if (dialogIndex >= round.dialog.length) {
    if (!round.question) {
      typeText("To ju≈º koniec gry! Do zobaczenia w sejmie.");
      document.getElementById('input-container').style.display = 'none';
      document.getElementById('next-button').style.display = 'none';
      return;
    } else {
      renderQuestion();
      return;
    }
  }

  // Normalne wy≈õwietlanie dialogu
  const line = round.dialog[dialogIndex];
  const isPoetic = line.poetic ? 'poetic' : '';
  typeText(line.text, null, isPoetic);
  document.getElementById('mascot-img').src = line.img || round.mascot;
  dialogIndex++;
  document.getElementById('next-button').style.display = 'inline-block';
  document.getElementById('next-button').textContent = 'Dalej';
}


function handleNextButton() {
  if (isAnswering) {
    submitAnswer();
  } else {
    const round = rounds[currentStep];

   

    if (dialogIndex === 0 && (!round.question || document.getElementById('speech-bubble').textContent.trim() === (round.question?.correctReaction?.text || ''))) {
  if (currentStep + 1 < rounds.length) {
    currentStep++;
    dialogIndex = 0;
    showNextDialog();
  } else {
    typeText("To ju≈º koniec gry! Do zobaczenia za rok.");
    document.getElementById('input-container').style.display = 'none';
    document.getElementById('next-button').style.display = 'none';
  }
} else {
  showNextDialog();
}

  }
}

    // document.addEventListener('keydown', e => {
    //   if (e.code === 'Space') {
    //     e.preventDefault();
    //     handleNextButton();
    //   }
    // });

    updateScoreDisplay();
    showNextDialog();
  </script>
</body>
</html>
